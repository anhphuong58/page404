<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n L√Ω Chi Ti√™u C√° Nh√¢n</title>
    <style>
        :root {
            --primary-color: #4f46e5;
            --bg-color: #f3f4f6;
            --text-color: #1f2937;
            --danger-color: #dc2626;
            --success-color: #16a34a;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            display: flex;
            flex-direction: row;
            gap: 20px;
            width: 100%;
            max-width: 1000px;
            align-items: flex-start;
        }

        /* Responsive: Stack columns on mobile */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
        }

        /* --- Table Section (Left) --- */
        .table-section {
            flex: 2;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        h2 {
            margin-top: 0;
            color: var(--primary-color);
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        th {
            background-color: #f9fafb;
            font-weight: 600;
            color: #4b5563;
        }

        tr:hover {
            background-color: #f3f4f6;
        }

        /* Style cho c·ªôt gi√° ti·ªÅn */
        .price-col {
            font-family: 'Courier New', Courier, monospace;
            font-weight: bold;
            color: var(--text-color);
        }

        /* Checkbox styling */
        .checkbox-container {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: var(--success-color);
        }

        /* Strikethrough effect for paid items */
        tr.paid .item-name, 
        tr.paid .price-col {
            text-decoration: line-through;
            color: #9ca3af;
        }

        tr.paid {
            background-color: #f0fdf4;
        }

        /* --- Summary Section (Right) --- */
        .summary-section {
            flex: 1;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 20px; /* Sticky scroll effect */
        }

        .summary-card {
            text-align: center;
        }

        .total-label {
            font-size: 1.1em;
            color: #6b7280;
            margin-bottom: 10px;
        }

        .total-amount {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--danger-color);
            margin: 10px 0;
        }

        .currency {
            font-size: 0.5em;
            vertical-align: super;
            color: #6b7280;
        }

        .note {
            font-size: 0.9em;
            color: #6b7280;
            margin-top: 20px;
            font-style: italic;
            border-top: 1px dashed #ccc;
            padding-top: 10px;
        }
        
        /* Hi·ªáu ·ª©ng nh·∫•p nh√°y nh·∫π khi c·∫≠p nh·∫≠t ti·ªÅn */
        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        .pop-anim {
            animation: pop 0.2s ease-in-out;
        }

    </style>
</head>
<body>

<div class="container">
    <!-- C·ªôt B·∫£ng D·ªØ Li·ªáu -->
    <div class="table-section">
        <h2>Danh S√°ch N·ª£</h2>
        <table>
            <thead>
                <tr>
                    <th style="width: 50%">H√†ng h√≥a</th>
                    <th style="width: 30%">Ti·ªÅn</th>
                    <th style="width: 20%; text-align: center;">Thanh to√°n</th>
                </tr>
            </thead>
            <tbody id="expense-table-body">
                <!-- D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c JS render v√†o ƒë√¢y -->
            </tbody>
        </table>
    </div>

    <!-- C·ªôt T·ªïng K·∫øt -->
    <div class="summary-section">
        <div class="summary-card">
            <div class="total-label">T·ªïng ti·ªÅn ch∆∞a thanh to√°n:</div>
            <div class="total-amount" id="total-display">0 <span class="currency">Y</span></div>
            
            <div style="margin-top: 15px; display: flex; justify-content: space-between; font-size: 0.9em; color: #555;">
                <span>T·ªïng danh s√°ch:</span>
                <span id="grand-total">0</span>
            </div>
            <div style="margin-top: 5px; display: flex; justify-content: space-between; font-size: 0.9em; color: var(--success-color);">
                <span>ƒê√£ thanh to√°n:</span>
                <span id="paid-total">0</span>
            </div>

            <!-- <div class="note">
                <p>üí° Tip: T√≠ch v√†o √¥ checkbox khi b·∫°n ƒë√£ thanh to√°n ho·∫∑c mu·ªën lo·∫°i kho·∫£n ƒë√≥ ra kh·ªèi t·ªïng n·ª£.</p>
            </div>-->
        </div>
    </div>
</div>

<script>
    // D·ªØ li·ªáu ƒë·∫ßu v√†o
    const expenseData = [
        { id: 1, name: "Mua thu·ªëc l·∫ßn 1", price: 8987, paid: false },
        { id: 2, name: "Mua thu·ªëc l·∫ßn 2", price: 3110, paid: false },
        { id: 3, name: "Cho m∆∞·ª£n ti·ªÅn chuy·ªÉn v·ªÅ", price: 20722, paid: false },
        { id: 4, name: "M∆∞·ª£n ti·ªÅn chuy·ªÉn cho NYC", price: 30000, paid: false },
        { id: 5, name: "Ng≈© c·ªëc", price: 732, paid: false },
        { id: 6, name: "Ti·ªÅn v√© t√†u", price: 1000, paid: false }
    ];

    const tableBody = document.getElementById('expense-table-body');
    const totalDisplay = document.getElementById('total-display');
    const grandTotalDisplay = document.getElementById('grand-total');
    const paidTotalDisplay = document.getElementById('paid-total');

    // H√†m ƒë·ªãnh d·∫°ng s·ªë (th√™m d·∫•u ch·∫•m ph√¢n c√°ch ng√†n)
    function formatNumber(num) {
        return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    }

    // H√†m render b·∫£ng
    function renderTable() {
        tableBody.innerHTML = ''; // X√≥a n·ªôi dung c≈©

        expenseData.forEach(item => {
            const tr = document.createElement('tr');
            if (item.paid) tr.classList.add('paid');

            tr.innerHTML = `
                <td class="item-name">${item.name}</td>
                <td class="price-col">${formatNumber(item.price)}</td>
                <td style="text-align: center;">
                    <div class="checkbox-container" style="justify-content: center;">
                        <input type="checkbox" 
                            onchange="togglePaid(${item.id})" 
                            ${item.paid ? 'checked' : ''}
                            title="ƒê√°nh d·∫•u l√† ƒë√£ thanh to√°n"
                        >
                    </div>
                </td>
            `;
            tableBody.appendChild(tr);
        });

        calculateTotals();
    }

    // H√†m x·ª≠ l√Ω khi check/uncheck
    function togglePaid(id) {
        const item = expenseData.find(i => i.id === id);
        if (item) {
            item.paid = !item.paid;
            renderTable(); // Re-render ƒë·ªÉ c·∫≠p nh·∫≠t style g·∫°ch ngang
        }
    }

    // H√†m t√≠nh to√°n t·ªïng
    function calculateTotals() {
        // T√≠nh t·ªïng to√†n b·ªô danh s√°ch
        const grandTotal = expenseData.reduce((sum, item) => sum + item.price, 0);
        
        // T√≠nh t·ªïng ƒë√£ tr·∫£ (checked)
        const paidTotal = expenseData.filter(item => item.paid).reduce((sum, item) => sum + item.price, 0);
        
        // T√≠nh t·ªïng ch∆∞a tr·∫£ (unchecked)
        const remainingTotal = grandTotal - paidTotal;

        // C·∫≠p nh·∫≠t giao di·ªán
        // Animate s·ªë t·ªïng ch√≠nh
        totalDisplay.classList.remove('pop-anim');
        void totalDisplay.offsetWidth; // Trigger reflow
        totalDisplay.classList.add('pop-anim');
        
        totalDisplay.innerHTML = `${formatNumber(remainingTotal)} <span class="currency">Y</span>`;
        
        // C·∫≠p nh·∫≠t c√°c s·ªë ph·ª•
        grandTotalDisplay.innerText = formatNumber(grandTotal);
        paidTotalDisplay.innerText = formatNumber(paidTotal);

        // ƒê·ªïi m√†u n·∫øu ƒë√£ tr·∫£ h·∫øt
        if (remainingTotal === 0) {
            totalDisplay.style.color = 'var(--success-color)';
            totalDisplay.innerHTML = `Ho√†n t·∫•t! <span style="font-size:0.5em">‚úîÔ∏è</span>`;
        } else {
            totalDisplay.style.color = 'var(--danger-color)';
        }
    }

    // Kh·ªüi ch·∫°y l·∫ßn ƒë·∫ßu
    renderTable();

</script>

</body>
</html>
